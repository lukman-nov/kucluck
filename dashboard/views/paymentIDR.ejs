<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <!-- OUTER SCRIPT -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/9746709e58.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.5/dist/sweetalert2.all.min.js"
    integrity="sha256-rFie6glbD6Zy9CLbJuxIEyU/VRe34QOSc1QH4eXrDQk=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://www.google.com/recaptcha/api.js"></script>
  <!-- END OUTER SCRIPT -->
  <!-- OUTER CSS -->
  <link rel="stylesheet" href="@sweetalert2/theme-borderless/borderless.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  <!-- END OUTER CSS -->
  <!-- MY CSS -->
  <link rel="stylesheet" href="/payment.css">
  <link rel="stylesheet" href="/header.css">
  <link rel="stylesheet" href="/settings.css">
  <!-- END MY CSS -->
  <title>Payment Gate | <%= bot.user.username %></title>
  <link rel="icon" type="image/png" href="<%= bot.user.displayAvatarURL({size: 128}) %>">
</head>

<body>
  <% if (premium) { %>
  <script>
    let timerInterval
    Swal.fire({
      title: 'Your Guild Has Premium!',
      imageUrl: "https://cdn.discordapp.com/attachments/901446802711142460/918761121161310228/kucluck_koin_1.png",
      html: 'I will close in <b></b> milliseconds.',
      timer: 3000,
      timerProgressBar: true,
      didOpen: () => {
        Swal.showLoading()
        const b = Swal.getHtmlContainer().querySelector('b')
        timerInterval = setInterval(() => {
          b.textContent = Swal.getTimerLeft()
        }, 100)
      },
      willClose: () => {
        clearInterval(timerInterval)
      }
    }).then((result) => {
      /* Read more about handling dismissals below */
      if (result.dismiss === Swal.DismissReason.timer) {
        window.location = "/premium";
        console.log('I was closed by the timer')
      }
    })
  </script>
  <% } %>
  <section>
    <template id='dana_QR'>
      <swal-title>Scan for Pay with Dana</swal-title>
      <swal-image src="https://media.discordapp.net/attachments/901446802711142460/932393500106960916/unknown.png"
        alt="DANA" />
    </template>
    <template id='ovo_QR'>
      <swal-title>Scan for Pay with OVO</swal-title>
      <swal-image src="https://media.discordapp.net/attachments/901446802711142460/932393638833582150/unknown.png"
        alt="OVO" />
    </template>
    <template id='BCA_QR'>
      <swal-title>Scan for Pay with BCA</swal-title>
      <swal-image src="https://media.discordapp.net/attachments/901446802711142460/932393728906260520/unknown.png"
        alt="BCA" />
      <swal-html>Rek: 2730232732<br>M Lukman Novawiyadi</swal-html>
    </template>
    <template id='QRIS'>
      <swal-title>Scan for Pay with All Methods</swal-title>
      <swal-image src="https://media.discordapp.net/attachments/901446802711142460/933668334963130398/unknown.png"
        alt="QRIS" />
    </template>
    <div class="container-lg p-5" style="margin-top: 100px;">
      <div class="row gy-5">
        <div class="col-md-12 bg-dark d-flex p-4">
          <div class="d-flex align-items-center">
            <div class="flex-shrink-0 img">
              <img src="<%= bot.user.displayAvatarURL({ dynamic: true}) %>" alt="logo">
            </div>
          </div>
          <div class="d-flex align-items-start justify-content-center flex-column bd-highlight" style="height: 150px;">
            <h1><%= bot.user.username %></h1>
            <h5>Payment Gate</h5>
          </div>
          <div class="d-flex justify-content-md-end ms-auto p-2 flex-column bd-highlight" style="height: 150px;">
            <button class="btn text-white">Bahasa Indonesia
              <img
                src="https://media.discordapp.net/attachments/901446802711142460/931751586097680415/indonesia.png?width=480&height=480"
                alt="ID" width="25px">
            </button>
          </div>
        </div>
        <div class="row gy-3">
          <div class="col payment-control d-block p-4">
            <form method="post" action="/paymentgate" class="row g-3 needs-validation" novalidate>
              <div class="row">
                <div class="col">
                  <div class="input-group mb-3">
                    <label for="username">
                      <span class="input-group-text">Username:</span>
                    </label>
                    <input type="text" class="form-control" id="username" name="username"
                      value="<%= user.username%>#<%= user.discriminator%>" readonly>
                  </div>
                </div>
                <div class="col">
                  <div class="input-group mb-3">
                    <label for="email">
                      <span class="input-group-text">Email:</span>
                    </label>
                    <input type="email" class="form-control" value="<%= user.email%>" id="email" name="email"
                      autocomplete="off" required>
                    <div class="invalid-feedback">
                      Enter your Email...
                    </div>
                  </div>
                </div>
              </div>
              <div class="input-group mb-3">
                <label for="guildname">
                  <span class="input-group-text">Guild Name:</span>
                </label>
                <select class="form-select" data-live-search="true" aria-label="guild" id="guildname" name="guildname"
                  required>
                  <option selected disabled class="text-muted">Choose Your Guild...</option>
                  <% user.guilds.filter(guild=>{
                  const permsOnGuild = new Permissions(guild.permissions_new);
                  if(permsOnGuild.has(Permissions.FLAGS.MANAGE_GUILD)) return guild;
                  }).sort((a, b) => {
                    return (bot.guilds.cache.get(a.id) == bot.guilds.cache.get(b.id)) ? 0 : a ? -1 : 1;
                  }).forEach(guild => { %>
                  <option value="<%= guild.name%>"><%= guild.name%></option>
                  <% }) %>
                </select>
              </div>
              <div class="input-group mb-3">
                <label for="period">
                  <span class="input-group-text">Period of time</span>
                </label>
                <select class="form-select" id="period" name="period"
                  oninvalid="setCustomValidity('Please selecet one!')" oninput="setCustomValidity('')" required>
                  <option selected disabled></option>
                  <option value="oneMonth">1 Month (IDR 25k)</option>
                  <option value="treeMonth">3 Months (IDR 65k)</option>
                  <option disabled value="sixMonth">6 Months (Comming Soon)</option>
                  <option disabled value="twelveMonth">12 Months (Comming Soon)</option>
                </select>
                <div class="invalid-feedback">
                  Select your plan...
                </div>
              </div>
              <div class="form-check mb-3" style="padding-left: 30px;">
                <input class="form-check-input" type="checkbox" id="terms" name="terms" checked required>
                <label class="form-check-label" for="terms">I agree with the <a href="/terms"
                    style="text-decoration: none;">terms and conditions</a></label>
              </div>
              <div class="row">
                <div class="col">
                  <button class="btn btn-secondary" onclick="location.href='/dashboard' " type="button"><i
                      class="fas fa-arrow-left"></i> Switch Server</button>
                </div>
                <div class="col-auto">
                  <button class="btn btn-secondary" type="reset" id="btn-cancel-payment"><i
                      class="fas fa-trash-restore"></i> Reset</button>
                  <button class="btn btn-success" type="submit" id="btn-submit-payment"><i
                      class="fas fa-money-bill-wave"></i> Pay</button>
                </div>
              </div>
              <script>
                  (function () {
                    'use strict'
                    var forms = document.querySelectorAll('.needs-validation')
                    Array.prototype.slice.call(forms)
                      .forEach(function (form) {
                        form.addEventListener('submit', function (event) {
                          if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                          }
                          form.classList.add('was-validated')
                        }, false)
                      })
                  })()
              </script>
            </form>
          </div>
        </div>
      </div>
  </section>
</body>

</html>